module.exports=function(t){var e={};function s(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,s),a.l=!0,a.exports}return s.m=t,s.c=e,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(r,a,function(e){return t[e]}.bind(null,a));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=895)}({17:function(t,e){t.exports=require("fs")},41:function(t,e){t.exports=require("zlib")},895:function(t,e,s){const r=s(17),a=s(41);t.exports=class t{static decode(e,s){return r.readFile(e,(function(e,r){return new t(r).decode(t=>s(t))}))}static load(e){const s=r.readFileSync(e);return new t(s)}constructor(t){let e;for(this.data=t,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.text={};;){const t=this.readUInt32();let n="";for(e=0;e<4;e++)n+=String.fromCharCode(this.data[this.pos++]);switch(n){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"PLTE":this.palette=this.read(t);break;case"IDAT":for(e=0;e<t;e++)this.imgData.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:this.transparency.indexed=this.read(t);var s=255-this.transparency.indexed.length;if(s>0)for(e=0;e<s;e++)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":var r=this.read(t),a=r.indexOf(0),i=String.fromCharCode.apply(String,r.slice(0,a));this.text[i]=String.fromCharCode.apply(String,r.slice(a+1));break;case"IEND":switch(this.colorType){case 0:case 3:case 4:this.colors=1;break;case 2:case 6:this.colors=3}this.hasAlphaChannel=[4,6].includes(this.colorType);var o=this.colors+(this.hasAlphaChannel?1:0);switch(this.pixelBitlength=this.bits*o,this.colors){case 1:this.colorSpace="DeviceGray";break;case 3:this.colorSpace="DeviceRGB"}return void(this.imgData=new Buffer(this.imgData));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}read(t){const e=new Array(t);for(let s=0;s<t;s++)e[s]=this.data[this.pos++];return e}readUInt32(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]}readUInt16(){return this.data[this.pos++]<<8|this.data[this.pos++]}decodePixels(t){return a.inflate(this.imgData,(e,s)=>{if(e)throw e;const{width:r,height:a}=this,i=this.pixelBitlength/8,o=new Buffer(r*a*i),{length:n}=s;let h=0;function c(t,e,c,l,d=!1){const f=Math.ceil((r-t)/c),p=Math.ceil((a-e)/l),u=i*f,b=d?o:new Buffer(u*p);let g=0,y=0;for(;g<p&&h<n;){var w,m,x,v,k;switch(s[h++]){case 0:for(x=0;x<u;x++)b[y++]=s[h++];break;case 1:for(x=0;x<u;x++)w=s[h++],v=x<i?0:b[y-i],b[y++]=(w+v)%256;break;case 2:for(x=0;x<u;x++)w=s[h++],m=(x-x%i)/i,k=g&&b[(g-1)*u+m*i+x%i],b[y++]=(k+w)%256;break;case 3:for(x=0;x<u;x++)w=s[h++],m=(x-x%i)/i,v=x<i?0:b[y-i],k=g&&b[(g-1)*u+m*i+x%i],b[y++]=(w+Math.floor((v+k)/2))%256;break;case 4:for(x=0;x<u;x++){var M,S;w=s[h++],m=(x-x%i)/i,v=x<i?0:b[y-i],0===g?k=S=0:(k=b[(g-1)*u+m*i+x%i],S=m&&b[(g-1)*u+(m-1)*i+x%i]);const t=v+k-S,e=Math.abs(t-v),r=Math.abs(t-k),a=Math.abs(t-S);M=e<=r&&e<=a?v:r<=a?k:S,b[y++]=(w+M)%256}break;default:throw new Error(`Invalid filter algorithm: ${s[h-1]}`)}if(!d){let s=((e+g*l)*r+t)*i,a=g*u;for(x=0;x<f;x++){for(let t=0;t<i;t++)o[s++]=b[a++];s+=(c-1)*i}}g++}}return 1===this.interlaceMethod?(c(0,0,8,8),c(4,0,8,8),c(0,4,4,8),c(2,0,4,4),c(0,2,2,4),c(1,0,2,2),c(0,1,1,2)):c(0,0,1,1,!0),t(o)})}decodePalette(){const{palette:t}=this,{length:e}=t,s=this.transparency.indexed||[],r=new Buffer(s.length+e);let a=0,i=0;for(let n=0;n<e;n+=3){var o;r[a++]=t[n],r[a++]=t[n+1],r[a++]=t[n+2],r[a++]=null!=(o=s[i++])?o:255}return r}copyToImageData(t,e){let s,r,{colors:a}=this,i=null,o=this.hasAlphaChannel;this.palette.length&&(i=this._decodedPalette||(this._decodedPalette=this.decodePalette()),a=4,o=!0);const n=t.data||t,{length:h}=n,c=i||e;let l=s=0;if(1===a)for(;l<h;){r=i?4*e[l/4]:s;const t=c[r++];n[l++]=t,n[l++]=t,n[l++]=t,n[l++]=o?c[r++]:255,s=r}else for(;l<h;)r=i?4*e[l/4]:s,n[l++]=c[r++],n[l++]=c[r++],n[l++]=c[r++],n[l++]=o?c[r++]:255,s=r}decode(t){const e=new Buffer(this.width*this.height*4);return this.decodePixels(s=>(this.copyToImageData(e,s),t(e)))}}}});
//# sourceMappingURL=png-js.js.map